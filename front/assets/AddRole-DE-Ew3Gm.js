import{r as x,d as _,$ as w,j as s,a0 as B,z as F,a1 as g,a2 as O,K as I,B as R}from"./index-CAbGq19O.js";import{s as a}from"./roles.module-DvaFn_FX.js";import{b as A}from"./roles-Cdw7N9oq.js";function E(){const{loading:p,handleCreateRole:b}=A(),[m,v]=x.useState(""),[t,i]=x.useState([]),{language:k}=_(),{roles:j}=k,{add_role_page:o}=j,c=w(),u=x.useMemo(()=>Object.entries(c).flatMap(([e,n])=>Object.keys(n)),[]),N=e=>{i(e?u:[])},f=(e,n)=>{const l=Object.keys(c[e]);i(n?r=>[...Array.from(new Set([...r,...l]))]:r=>r.filter(d=>!l.includes(d)))},$=e=>Object.keys(c[e]).map(l=>l).every(l=>t.includes(l)),C=u.every(e=>t.includes(e));return s.jsx("div",{className:"external-page-wra",children:s.jsxs("div",{className:"external-page",children:[s.jsx("h2",{className:"header",children:o.add_roles}),s.jsxs("div",{className:`${a.roleHeaderFields}`,children:[s.jsxs(B,{children:[s.jsx(F,{id:"role-name",value:m,onChange:e=>v(e.target.value),className:"full-width-input"}),s.jsx("label",{htmlFor:"role-name",children:o.role_name_label})]}),s.jsxs("div",{className:`${a.rolePermissionSwitcher}`,children:[s.jsx("label",{htmlFor:"toggle-all-permissions",children:o.all_permissions}),s.jsx(g,{inputId:"toggle-all-permissions",checked:C,onChange:e=>N(e.value)})]})]}),s.jsx("div",{className:`${a.permissionBoxesCon}`,children:Object.entries(c).map(([e,n])=>s.jsxs("div",{className:`${a.permissionBox}`,children:[s.jsxs("div",{className:`${a.rolePermissionSwitcher} ${a.permissionBoxHeader}`,children:[s.jsx("label",{htmlFor:`toggle-${e}-permissions`,children:j.permissionsKeys[e]||e}),s.jsx(g,{inputId:`toggle-${e}-permissions`,checked:$(e),onChange:l=>f(e,l.value)})]}),s.jsx("div",{className:`${a.permissionCheckBoxes}`,children:Object.entries(n).map(([l,r])=>{const d=`${e}-${l}`;return s.jsxs("div",{children:[s.jsx(O,{inputId:d,name:`${e}Permissions`,checked:t.includes(l),onChange:P=>{P.checked?i(h=>[...Array.from(new Set([...h,l]))]):i(h=>h.filter(S=>S!==l))}}),s.jsx("label",{htmlFor:d,className:"checkbox-label",children:r})]},l)})})]},e))}),s.jsx(I,{}),s.jsx(R,{label:o.add_roles,loading:p,onClick:()=>{b(m,t)},disabled:!m.trim(),className:"button-align-end"})]})})}export{E as default};
