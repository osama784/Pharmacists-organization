import{r as c,d as A,e as T,a3 as I,a4 as O,a5 as L,a6 as H,a7 as G,a8 as $,b as q,f as Q,a9 as X,g as j,j as t,D as p,aa as z,ab as J,B as u,ac as K,ad as U,ae as V,k as W}from"./index-CAbGq19O.js";import{D as Y,C as r,I as i,b as g,c as Z,P as ee,a as te}from"./Filters-BDT0_iG5.js";import{F as ae}from"./FailedRequest-kw7mU4Mw.js";function ne(){const[w,y]=c.useState(!0),[C,b]=c.useState(null),{language:{pharmacists:a}}=A(),{can:f}=T(),E=I(),x=O(e=>e.pharmacists.downloading),N=L(),P=H(),F=G(),{deletingPharmacist:S,handleDeletePharmacist:M}=$(),{response:o,error:_,loading:B,execute:h}=q("pharmacists/list",!1),[s,l]=c.useState({limit:10,page:0}),k=c.useCallback(Q(h,300),[]);c.useEffect(()=>{const e=X(s);k(`pharmacists/list?${j(e)}`);const n=d=>{d.origin===window.location.origin&&d.data.type==="PHARMACIST_CHANGED"&&h(`pharmacists/list?${j(e)}`)};return window.addEventListener("message",n),()=>{window.removeEventListener("message",n)}},[s]);const m=(e,n)=>{l(d=>({...d,[n]:e.target.value}))},v=e=>{l(n=>({...n,limit:e.rows,page:e.page}))},D=e=>{const n=()=>{b(e)};return t.jsxs("div",{className:"actions-con",children:[t.jsx(u,{icon:"pi pi-pencil",rounded:!0,text:!0,onClick:()=>{n(),window.open(`/#/update-pharmacist?id=${e.id}`,"_blank","width=1000,height=620")}}),f(V)&&t.jsx(u,{icon:"pi pi-trash",rounded:!0,text:!0,severity:"danger",onClick:d=>{n(),R(d,e)}})]})},R=(e,n)=>{W({target:e.currentTarget,message:a.delete_confirm,icon:"pi pi-exclamation-triangle",acceptLabel:a.delete_yes,rejectLabel:a.delete_cancel,accept:async()=>{M(n,h)}})};return t.jsx("div",{className:"datatable-filter-demo p-toolbar header-justify-between footer-justify-between",children:t.jsxs(Y,{value:o==null?void 0:o.data,loading:B||S,emptyMessage:()=>_?t.jsx(ae,{setFilters:l}):a.no_records,scrollable:!0,selectionMode:"single",selection:C,onSelectionChange:e=>b(e.value),filterDisplay:w?"row":void 0,header:t.jsxs(t.Fragment,{children:[f(U)&&t.jsx(u,{label:a.add_pharmacist,outlined:!0,icon:"pi pi-plus",onClick:()=>{window.open("/#/add-pharmacist","_blank","width=1000,height=650")}}),t.jsx("div",{className:"show-filter-button-wrapper button-align-end",children:t.jsx(u,{icon:"pi pi-filter",severity:"secondary",text:!w,onClick:()=>y(e=>!e)})})]}),footer:t.jsxs("div",{className:"table-footer",children:[f(J)&&t.jsx(u,{label:a.export,loading:x,text:!0,severity:"secondary",onClick:()=>{x||E(K(s))}}),t.jsx(ee,{className:"align-end",rows:s.limit,first:s.page*s.limit,totalRecords:o==null?void 0:o.meta.totalItems,onPageChange:e=>v(e),rowsPerPageOptions:[10,25,50,100],template:te()})]}),children:[t.jsx(r,{showFilterMenu:!1,showClearButton:!1,field:"fullName",header:a.full_name,filter:!0,filterElement:t.jsx(i,{label:"fullName",filters:s,setFilters:l})}),t.jsx(r,{showFilterMenu:!1,showClearButton:!1,field:"motherName",header:a.mother_name,filter:!0,filterElement:t.jsx(i,{label:"motherName",filters:s,setFilters:l})}),t.jsx(r,{showFilterMenu:!1,showClearButton:!1,field:"gender",header:a.gender,filter:!0,filterElement:t.jsx(p,{value:s.gender,options:N,onChange:e=>m(e,"gender"),placeholder:a.select,className:"dropdown-filter-element"})}),t.jsx(r,{showFilterMenu:!1,showClearButton:!1,field:"nationalNumber",header:a.national_number,filter:!0,body:e=>e.nationalNumber||a.unknown,filterElement:t.jsx(g,{label:"nationalNumber",filters:s,setFilters:l})}),t.jsx(r,{showFilterMenu:!1,showClearButton:!1,field:"integrity",header:a.integrity,filter:!0,body:e=>e.integrity||a.unknown,filterElement:t.jsx(i,{label:"integrity",filters:s,setFilters:l})}),t.jsx(r,{showFilterMenu:!1,showClearButton:!1,field:"register",header:a.register,filter:!0,body:e=>e.register||a.unknown,filterElement:t.jsx(i,{label:"register",filters:s,setFilters:l})}),t.jsx(r,{showFilterMenu:!1,showClearButton:!1,field:"birthPlace",header:a.birth_place,filter:!0,body:e=>e.birthPlace||a.unknown,filterElement:t.jsx(i,{label:"birthPlace",filters:s,setFilters:l})}),t.jsx(r,{showFilterMenu:!1,showClearButton:!1,field:"phoneNumber",header:a.phone_number,filter:!0,body:e=>e.phoneNumber||a.unknown,filterElement:t.jsx(i,{label:"phoneNumber",filters:s,setFilters:l})}),t.jsx(r,{showFilterMenu:!1,showClearButton:!1,field:"landlineNumber",header:a.landline_number,filter:!0,body:e=>e.landlineNumber||a.unknown,filterElement:t.jsx(g,{label:"landlineNumber",filters:s,setFilters:l})}),t.jsx(r,{showFilterMenu:!1,showClearButton:!1,field:"address",header:a.address,filter:!0,body:e=>e.address||a.unknown,filterElement:t.jsx(i,{label:"address",filters:s,setFilters:l})}),t.jsx(r,{showFilterMenu:!1,showClearButton:!1,field:"registrationNumber",header:a.registration_number,filter:!0,filterElement:t.jsx(g,{label:"registrationNumber",filters:s,setFilters:l})}),t.jsx(r,{showFilterMenu:!1,showClearButton:!1,field:"syndicateMembershipStatus",header:a.syndicate_membership_status,filter:!0,filterElement:t.jsx(i,{label:"syndicateMembershipStatus",filters:s,setFilters:l})}),t.jsx(r,{showFilterMenu:!1,showClearButton:!1,field:"currentSyndicate.syndicate",header:a.current_syndicate,filter:!0,body:e=>{var n;return((n=e.currentSyndicate)==null?void 0:n.syndicate)||a.unknown},filterElement:t.jsx(p,{value:s.currentSyndicate,options:F,onChange:e=>m(e,"currentSyndicate"),placeholder:a.select,className:"dropdown-filter-element"})}),t.jsx(r,{showFilterMenu:!1,showClearButton:!1,field:"practiceState",header:a.practice_state,filter:!0,body:e=>e.practiceState||a.unknown,filterElement:t.jsx(p,{value:s.practiceState,options:P,onChange:e=>m(e,"practiceState"),placeholder:a.select,className:"dropdown-filter-element"})}),t.jsx(r,{showFilterMenu:!1,showClearButton:!1,field:"registrationDate",header:a.registration_date,filter:!0,body:e=>z(e.registrationDate),filterElement:t.jsx(Z,{label:"registrationDate",filters:s,setFilters:l})}),t.jsx(r,{showFilterMenu:!1,showClearButton:!1,filter:!0,className:"actions-col",body:e=>D(e),filterElement:t.jsx("div",{className:"actions-filter"})})]})})}export{ne as default};
