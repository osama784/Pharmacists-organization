import{r as i,d as P,a3 as v,a4 as C,e as E,b as R,f as S,aN as D,g as u,j as a,aO as N,B as O,aP as _}from"./index-CAbGq19O.js";import{D as I,C as g,P as A,a as L,c as T}from"./Filters-BDT0_iG5.js";import{F as k}from"./FailedRequest-kw7mU4Mw.js";import{s as G}from"./accounting-B1riqVYz.js";function Q(){const[m,p]=i.useState(null),{language:{accounting:r}}=P(),f=v(),d=C(e=>e.syndicateFunds.downloading),{can:y}=E(),{response:o,error:w,loading:x,execute:c}=R("reports/invoices",!1),[s,l]=i.useState({limit:10,page:0,section:"صندوق النقابة"}),b=i.useCallback(S(c,300),[]);i.useEffect(()=>{const e=D(s);b(`reports/invoices?${u(e)}`);const t=n=>{n.origin===window.location.origin&&n.data.type==="INVOICE_CHANGED"&&c(`syndicateFunds/list?${u(e)}`)};return window.addEventListener("message",t),()=>{window.removeEventListener("message",t)}},[s]);const h=e=>{l(t=>({...t,limit:e.rows,page:e.page}))},j=(e,t)=>{if(!e)return 0;const n=e.find(F=>F.name===t);return n!=null&&n.value?n.value:r.unknown};return a.jsx("div",{className:"datatable-filter-demo p-toolbar header-justify-between footer-justify-between",children:a.jsxs(I,{value:o==null?void 0:o.data,loading:x,emptyMessage:()=>w?a.jsx(k,{setFilters:l}):r.no_records,scrollable:!0,selectionMode:"single",selection:m,onSelectionChange:e=>p(e.value),header:a.jsx(T,{label:"createdAt",filters:s,setFilters:l}),footer:a.jsxs("div",{className:"table-footer",children:[y(N)&&a.jsx(O,{label:r.export,loading:d,text:!0,severity:"secondary",onClick:()=>{d||f(_(s))}}),a.jsx(A,{className:"align-end",rows:s.limit,first:s.page*s.limit,totalRecords:o==null?void 0:o.meta.totalItems,onPageChange:e=>h(e),rowsPerPageOptions:[10,25,50,100],template:L()})]}),children:[a.jsx(g,{field:"receiptNumber",header:r.receipt_number}),G.map(e=>a.jsx(g,{header:e,body:t=>a.jsx("span",{children:j(t.fees,e)})},e))]})})}export{Q as default};
