import{r as i,d as F,a3 as v,a4 as C,e as E,b as P,f as R,aN as D,g as u,j as a,aO as N,B as O,aS as _}from"./index-CAbGq19O.js";import{D as H,C as g,P as I,a as A,c as L}from"./Filters-BDT0_iG5.js";import{F as T}from"./FailedRequest-kw7mU4Mw.js";import{h as k}from"./accounting-B1riqVYz.js";function B(){const[m,p]=i.useState(null),{language:{accounting:n}}=F(),h=v(),d=C(e=>e.healthSolidarityFunds.downloading),{can:f}=E(),{response:r,error:y,loading:w,execute:c}=P("reports/invoices",!1),[s,l]=i.useState({limit:10,page:0,section:"خزانة التكافل الصحي"}),x=i.useCallback(R(c,300),[]);i.useEffect(()=>{const e=D(s);x(`reports/invoices?${u(e)}`);const t=o=>{o.origin===window.location.origin&&o.data.type==="INVOICE_CHANGED"&&c(`healthSolidarityFunds/list?${u(e)}`)};return window.addEventListener("message",t),()=>{window.removeEventListener("message",t)}},[s]);const b=e=>{l(t=>({...t,limit:e.rows,page:e.page}))},S=(e,t)=>{if(!e)return 0;const o=e.find(j=>j.name===t);return o!=null&&o.value?o.value:n.unknown};return a.jsx("div",{className:"datatable-filter-demo p-toolbar header-justify-between footer-justify-between",children:a.jsxs(H,{value:r==null?void 0:r.data,loading:w,emptyMessage:()=>y?a.jsx(T,{setFilters:l}):n.no_records,scrollable:!0,selectionMode:"single",selection:m,onSelectionChange:e=>p(e.value),header:a.jsx(L,{label:"createdAt",filters:s,setFilters:l}),footer:a.jsxs("div",{className:"table-footer",children:[f(N)&&a.jsx(O,{label:n.export,loading:d,text:!0,severity:"secondary",onClick:()=>{d||h(_(s))}}),a.jsx(I,{className:"align-end",rows:s.limit,first:s.page*s.limit,totalRecords:r==null?void 0:r.meta.totalItems,onPageChange:e=>b(e),rowsPerPageOptions:[10,25,50,100],template:A()})]}),children:[a.jsx(g,{field:"receiptNumber",header:n.receipt_number}),k.map(e=>a.jsx(g,{header:e,body:t=>a.jsx("span",{children:S(t.fees,e)})},e))]})})}export{B as default};
