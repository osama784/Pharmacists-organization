import{b as w,d as g,J as R,K as _,M as c,a0 as h}from"./index-BEh_xnfq.js";const y=()=>{const{response:s,loading:o,error:a,execute:l}=w("users/roles/list");return{usersRoles:s?s.data.map(t=>({name:t.name,id:t.id})):[],getUsersRoles:l,loading:o,error:a}},D=s=>{const{language:o}=g(),{roles:{update_role_page:a}}=o,{execute:l,loading:i}=_(`users/roles/update/${s}`);return{handleUpdateRole:async(u,d)=>{var r,n,e;try{await l(void 0,{name:u,permissions:d}),c("success",a.role_updated,"",5e3),window.opener&&!window.opener.closed&&window.opener.postMessage({type:"ROLE_CHANGED"},window.location.origin)}catch(p){c("error",o.toast.an_error_occurred,((e=(n=(r=p==null?void 0:p.response)==null?void 0:r.data)==null?void 0:n.details)==null?void 0:e[0])||"",5e3)}},loading:i}},x=()=>{const{language:s}=g(),{roles:{add_role_page:o}}=s,{execute:a,loading:l}=R("users/roles/create");return{handleCreateRole:async(t,u)=>{var d,r,n;try{await a(void 0,{name:t,permissions:u}),c("success",o.role_added,"",5e3),window.opener&&!window.opener.closed&&window.opener.postMessage({type:"ROLE_CHANGED"},window.location.origin)}catch(e){c("error",s.toast.an_error_occurred,((n=(r=(d=e==null?void 0:e.response)==null?void 0:d.data)==null?void 0:r.details)==null?void 0:n[0])||"",5e3)}},loading:l}},C=()=>{const{loading:s,execute:o}=h("users/roles/delete"),{language:a}=g(),{roles:l}=a;return{handleDeleteRole:async(t,u)=>{var d,r,n;try{await o(`users/roles/delete/${t.id}`),c("success",l.item_deleted+t.name,"",5e3),u()}catch(e){c("error",a.toast.an_error_occurred,((n=(r=(d=e==null?void 0:e.response)==null?void 0:d.data)==null?void 0:r.details)==null?void 0:n[0])||"",5e3)}},deletingRole:s}};export{C as a,x as b,D as c,y as u};
